BUILD_NAME_OPTION = _FREQ_300
Running maxjc ...
Using maxj batch compiler.
jar: /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/ecj.jar
MAXAPPJCP=.:/mnt/ccnas2/bdp/rz3515/projects/deacon/src:/mnt/ccnas2/bdp/rz3515/projects/deacon/test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar \
	MAXAPPPKG=resnet_18_fst MAXSOURCEDIRS=../../src:/mnt/ccnas2/bdp/rz3515/projects/deacon/src \
	maxJavaRun -v -m 8192 Resnet18FstManager \
	DFEModel=MAIA maxFileName=Resnet18Fst target='DFE_SIM' enableMPCX=false \
	FREQ=300 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst/data/data-resnet-18-fst.txt 
]0; maxJavaRun: Resnet18FstManager DFEModel=MAIA maxFileName=Resnet18Fst target=DFE_SIM enableMPCX=false FREQ=300 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst/data/data-resnet-18-fst.txt maxJavaRun : Execute Java program with Maxeler environment

Input classpath     : 
MaxCompiler JAR     : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar
                      (from MAXCOMPILERDIR)
MAXAPPJCP           : .:/mnt/ccnas2/bdp/rz3515/projects/deacon/src:/mnt/ccnas2/bdp/rz3515/projects/deacon/test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
MAXSOURCEDIRS       : ../../src:/mnt/ccnas2/bdp/rz3515/projects/deacon/src

.maxJavaRun present : No
Custom Param file   : None
MAXAPPPKG           : resnet_18_fst
MAXJVMMEM           : 
MAXEMMAJCP          : 
MAXEMMARUN          : 
JACOCO_AGENT        : 
JACOCO_AGENT_OPTIONS: 

----------------------------------------------------------
Java class to run   : resnet_18_fst.Resnet18FstManager
Class arguments     : DFEModel=MAIA maxFileName=Resnet18Fst target=DFE_SIM enableMPCX=false FREQ=300 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst/data/data-resnet-18-fst.txt
Execution classpath : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar:
                      .:
                      /mnt/ccnas2/bdp/rz3515/projects/deacon/src:
                      /mnt/ccnas2/bdp/rz3515/projects/deacon/test:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
JVM memory limit    : 8192 MB
----------------------------------------------------------

Wed 17:24: MaxCompiler version: 2021.1
Wed 17:24: Build "Resnet18Fst" start time: Wed Dec 22 17:24:52 GMT 2021
Wed 17:24: Main build process running as user rz3515 on host cccad5.doc.ic.ac.uk
Wed 17:24: Build location: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300
Wed 17:24: Detailed build log available in "_build.log"
Wed 17:24: 
Wed 17:24: ENGINE BUILD PARAMETERS
Wed 17:24: 	              Build name: Resnet18Fst_MAIA_DFE_SIM_FREQ_300                                                                     
Wed 17:24: 	             maxFileName: Resnet18Fst                                                                                           
Wed 17:24: 	                  target: DFE_SIM                                                                                               
Wed 17:24: 	                DFEModel: MAIA                                                                                                  
Wed 17:24: 	              enableMPCX: false                                                                                                 
Wed 17:24: 	                bitWidth: 32                                                                                                    
Wed 17:24: 	                     WBW: 32                                                                                                    
Wed 17:24: 	                   DTYPE: fixed                                                                                                 
Wed 17:24: 	           NUM_FRAC_BITS: 8                                                                                                     
Wed 17:24: 	                      PF: 1                                                                                                     
Wed 17:24: 	                      PC: 1                                                                                                     
Wed 17:24: 	                      PK: 1                                                                                                     
Wed 17:24: 	                       H: 1                                                                                                     
Wed 17:24: 	                       W: 1                                                                                                     
Wed 17:24: 	                       C: 1                                                                                                     
Wed 17:24: 	                       F: 1                                                                                                     
Wed 17:24: 	                       K: 1                                                                                                     
Wed 17:24: 	                     PAD: 0                                                                                                     
Wed 17:24: 	                       S: 1                                                                                                     
Wed 17:24: 	                     SEQ: 0                                                                                                     
Wed 17:24: 	                    FREQ: 300                                                                                                   
Wed 17:24: 	                USE_DRAM: false                                                                                                 
Wed 17:24: 	                 USE_BNN: false                                                                                                 
Wed 17:24: 	            USE_WINOGRAD: false                                                                                                 
Wed 17:24: 	WINOGRAD_WEIGHTS_OFFLINE: false                                                                                                 
Wed 17:24: 	   NUM_COEFF_FIFO_SPLITS: 1                                                                                                     
Wed 17:24: 	                   DEBUG: false                                                                                                 
Wed 17:24: 	           COEFF_ON_CHIP: false                                                                                                 
Wed 17:24: 	              INIT_COEFF: false                                                                                                 
Wed 17:24: 	              COEFF_FILE: /mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst/data/data-resnet-18-fst.txt
Wed 17:24: Generating kernel conv0 ...
Wed 17:24: Instantiating kernel "conv0"
Wed 17:24: T = dfeFix(8, 0, TWOSCOMPLEMENT)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: coeffOnChip = true
Wed 17:24: Input height = 112, output height = 112, pad = 1
Wed 17:24: Counter H = 114 W = 114
Wed 17:24: oh is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: ow is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: Read for key = conv0
Wed 17:24: Ifmap buffer configuration 65536 x 1
Wed 17:24: loop = false
Wed 17:24: Building line buffer for "conv0" ...
Wed 17:24: Line buffer shape 3 x 112, produces 1 number of 3 x 3 tiles per cycle
Wed 17:24: Line buffer input vector size: 1, output vector size: 9.
Wed 17:24: Number of separated line buffers: 1
Wed 17:24: Initialising line buffer kernel with 3 x 114 x 1
Wed 17:24: Size of line buffer output: 3
Wed 17:24: Number of line buffer output chunks: 3
Wed 17:24: Connecting outputs from chunk (#000) ...
Wed 17:24: Connecting outputs from chunk (#001) ...
Wed 17:24: Connecting outputs from chunk (#002) ...
Wed 17:24: Building the CORE arithmetic unit for "conv0" ...
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: CORE ifmap vector size: 9
Wed 17:24: CORE coefficient vector size: 9
Wed 17:24: CORE ofmap vector size: 1
Wed 17:24: [ConvLayerOfmapBuffer] depth =  4096 addr_bits =    12
Wed 17:24: Connecting to output: ofmap
Wed 17:24: Compiling kernel "conv0"
Wed 17:24: 
Wed 17:24: Generating kernel conv1 ...
Wed 17:24: Instantiating kernel "conv1"
Wed 17:24: T = dfeFix(8, 0, TWOSCOMPLEMENT)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: coeffOnChip = true
Wed 17:24: Input height = 56, output height = 56, pad = 1
Wed 17:24: Counter H = 58 W = 58
Wed 17:24: oh is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: ow is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: Read for key = conv1
Wed 17:24: Ifmap buffer configuration 262144 x 1
Wed 17:24: loop = false
Wed 17:24: Building line buffer for "conv1" ...
Wed 17:24: Line buffer shape 3 x 56, produces 1 number of 3 x 3 tiles per cycle
Wed 17:24: Line buffer input vector size: 1, output vector size: 9.
Wed 17:24: Number of separated line buffers: 1
Wed 17:24: Initialising line buffer kernel with 3 x 58 x 1
Wed 17:24: Size of line buffer output: 3
Wed 17:24: Number of line buffer output chunks: 3
Wed 17:24: Connecting outputs from chunk (#000) ...
Wed 17:24: Connecting outputs from chunk (#001) ...
Wed 17:24: Connecting outputs from chunk (#002) ...
Wed 17:24: Building the CORE arithmetic unit for "conv1" ...
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: CORE ifmap vector size: 9
Wed 17:24: CORE coefficient vector size: 9
Wed 17:24: CORE ofmap vector size: 1
Wed 17:24: [ConvLayerOfmapBuffer] depth =  4096 addr_bits =    12
Wed 17:24: Connecting to output: ofmap
Wed 17:24: Connecting to output: ofmap_1
Wed 17:24: Compiling kernel "conv1"
Wed 17:24: 
Wed 17:24: Generating kernel conv2 ...
Wed 17:24: Instantiating kernel "conv2"
Wed 17:24: T = dfeFix(8, 0, TWOSCOMPLEMENT)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: coeffOnChip = true
Wed 17:24: Input height = 56, output height = 56, pad = 1
Wed 17:24: Counter H = 58 W = 58
Wed 17:24: oh is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: ow is dfeFix(32, 0, TWOSCOMPLEMENT)
Wed 17:24: Read for key = conv2
Wed 17:24: Ifmap buffer configuration 4096 x 1
Wed 17:24: loop = false
Wed 17:24: Building line buffer for "conv2" ...
Wed 17:24: Line buffer shape 3 x 56, produces 1 number of 3 x 3 tiles per cycle
Wed 17:24: Line buffer input vector size: 1, output vector size: 9.
Wed 17:24: Number of separated line buffers: 1
Wed 17:24: Initialising line buffer kernel with 3 x 58 x 1
Wed 17:24: Size of line buffer output: 3
Wed 17:24: Number of line buffer output chunks: 3
Wed 17:24: Connecting outputs from chunk (#000) ...
Wed 17:24: Connecting outputs from chunk (#001) ...
Wed 17:24: Connecting outputs from chunk (#002) ...
Wed 17:24: Building the CORE arithmetic unit for "conv2" ...
Wed 17:24: WT = dfeFix(2, 0, UNSIGNED)
Wed 17:24: CORE ifmap vector size: 9
Wed 17:24: CORE coefficient vector size: 9
Wed 17:24: CORE ofmap vector size: 1
Wed 17:24: [ConvLayerOfmapBuffer] depth = 262144 addr_bits =    18
Wed 17:24: Connecting to output: ofmap
Wed 17:24: Compiling kernel "conv2"
Wed 17:24: 
Wed 17:24: Generating padding kernels for DRAM access
Wed 17:24: Instantiating kernel "ifmap_unpad"
Wed 17:24: Compiling kernel "ifmap_unpad"
Wed 17:24: 
Wed 17:24: Instantiating kernel "ofmap_pad"
Wed 17:24: Compiling kernel "ofmap_pad"
Wed 17:24: 
Wed 17:24: Setting up stream connections for conv0
Wed 17:24: Setting up stream connections for conv1
Wed 17:24: Setting up stream connections for conv2
Wed 17:24: DRAM will be used to build the design
Wed 17:24: Setup streams for kernel "conv0"
Wed 17:24: # cycles:       2495232
Wed 17:24: # ifmap stream: 37632
Wed 17:24: # coeff stream: 1728
Wed 17:24: # ofmap stream: 200704
Wed 17:24: coeff vec size: 9
Wed 17:24: coeff stream bit width: 72
Wed 17:24: coeff stream chunk size: 9
Wed 17:24: Setup streams for kernel "conv1"
Wed 17:24: # cycles:       13778944
Wed 17:24: # ifmap stream: 200704
Wed 17:24: # coeff stream: 36864
Wed 17:24: # ofmap stream: 200704
Wed 17:24: coeff vec size: 9
Wed 17:24: coeff stream bit width: 72
Wed 17:24: coeff stream chunk size: 9
Wed 17:24: Setup streams for kernel "conv2"
Wed 17:24: # cycles:       13778944
Wed 17:24: # ifmap stream: 200704
Wed 17:24: # coeff stream: 36864
Wed 17:24: # ofmap stream: 200704
Wed 17:24: coeff vec size: 9
Wed 17:24: coeff stream bit width: 72
Wed 17:24: coeff stream chunk size: 9
Wed 17:24: Running back-end simulation build (3 phases)
Wed 17:24: (1/3) - Prepare MaxFile Data (GenerateMaxFileDataFile)
Wed 17:24: (2/3) - Compile Simulation Modules (SimCompilePass)
Wed 17:25: (3/3) - Generate MaxFile (AddSimObjectToMaxFilePass)
Wed 17:25: MaxFile: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Resnet18Fst.max (MD5Sum: ea1e8da5cf5cf59bb5545181bd276f8e)
Wed 17:25: Build completed: Wed Dec 22 17:25:07 GMT 2021 (took 14 secs)
cp /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Resnet18Fst.h /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Maxfiles.h
sliccompile /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Resnet18Fst.max Resnet18Fst_FREQ_300_sim.o
Processing maxfile for MAX5_LIMA_SIM from '/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Resnet18Fst.max'.
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/dev/null" -DSLIC_NO_DESTRUCTORS -c /tmp/sliccompile_1051846108735204334/cobject/max_8603114321635382551.c -o /tmp/sliccompile_1051846108735204334/cobject/max_8603114321635382551.c.o 
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Resnet18Fst_MAIA_DFE_SIM_FREQ_300/results/Resnet18Fst.max" -DSLIC_NO_DESTRUCTORS -c /vol/cc/opt/maxeler/maxcompiler-2021.1/src/slicinterface/MaxFileInit.c -o max_7964641529496259919.o 
ld -r /tmp/sliccompile_1051846108735204334/cobject/max_8603114321635382551.c.o max_7964641529496259919.o -o Resnet18Fst_FREQ_300_sim.o 
Copying .max file C object into '/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst'
g++ -fopenmp -lrt -D_GLIBCXX_USE_CXX11_ABI=0 -O3 -std=c++11  -Wall -I/mnt/ccnas2/bdp/rz3515/cccad/opt/include -I/usr/local/include -I../src -I../src/include -I/mnt/ccnas2/bdp/rz3515/projects/deacon/runtime/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -I/lib/maxeleros-sim/include -I/mnt/ccnas2/bdp/rz3515/projects/deacon/lib/dfe-snippets/include -D_XOPEN_SOURCE=600 -DDESIGN_   -g -o Resnet18Fst_FREQ_300_sim Resnet18Fst_FREQ_300_sim.o Resnet18Fst_FREQ_300_simc.o -L/mnt/ccnas2/bdp/rz3515/cccad/opt/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib -L/lib/maxeleros-sim/lib -L./ -lmaxeleros -lglog -lgflags -lslic -lm -lpthread -lcurl
maxcompilersim -n rz3515a -cLIMA -d1 restart

Simulated system 'rz3515a' started:
    Board:                   MAX5C (default: 48GB RAM)
    RAM size for simulation: 51539607552 bytes.
    Temporary RAM file in    /tmp/. (Use option -k to preserve it.)
    Simulation log:          /homes/rz3515/.maxcompilersim/rz3515a-cccad5.log
    Daemon log:              /homes/rz3515/.maxcompilersim/rz3515a-cccad5_daemon.log

Simulated devices available:
    rz3515a0:rz3515a

To use simulated devices you need to set the environment variables
LD_PRELOAD and MAXELEROSDIR. As LD_PRELOAD must not contain spaces,
you might need to set LD_LIBRARY_PATH in addition (see the MaxCompiler
tutorial for details).  Also, ensure that you add the correct simulated
system name (namely "rz3515a") to your SLiC configuration. The following
examples assume there are no spaces in LD_PRELOAD or SLIC_CONF.
Example for BASH:
    export MAXELEROSDIR=$MAXCOMPILERDIR/lib/maxeleros-sim
    export LD_PRELOAD=$MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    export SLIC_CONF="$SLIC_CONF;use_simulation=rz3515a"
Example for CSH:
    setenv MAXELEROSDIR $MAXCOMPILERDIR/lib/maxeleros-sim
    setenv LD_PRELOAD $MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    setenv SLIC_CONF "$SLIC_CONF;use_simulation=rz3515a"

SLIC_CONF+="default_maxdebug_mode=MAX_DEBUG_ALWAYS;" SLIC_CONF+="use_simulation=rz3515a" LD_PRELOAD=/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib/libmaxeleros.so ./Resnet18Fst_FREQ_300_sim -n 2 -f /mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst/data/data-resnet-18-fst.txt
make stopsim
make[1]: Entering directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst'
maxcompilersim -n rz3515a -cLIMA stop
Terminating MaxelerOS daemon (PID 410571)...
MaxelerOS daemon killed
Terminating simulated system (PID 410566)...
Simulated system killed
make[1]: Leaving directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/test/build/resnet_18_fst'
