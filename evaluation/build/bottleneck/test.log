BUILD_NAME_OPTION = _b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200
Running maxjc ...
Using maxj batch compiler.
jar: /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/ecj.jar
MAXAPPJCP=.:../../../src:../../../test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar \
	MAXAPPPKG=bottleneck MAXSOURCEDIRS=../../src:../../../src \
	maxJavaRun -v -m 8192 BottleneckManager \
	DFEModel=MAIA maxFileName=Bottleneck target='DFE_SIM' enableMPCX=false \
	bitWidth=8 WBW=2 PF=1 PC=1 PK=1 H=4 W=4 C=8 F=8 K=3 SEQ0=0 SEQ1=0 SEQ2=0 USE_DRAM=true FREQ=200 COEFF_ON_CHIP=true DEBUG=false INIT_COEFF=true
]0; maxJavaRun: BottleneckManager DFEModel=MAIA maxFileName=Bottleneck target=DFE_SIM enableMPCX=false bitWidth=8 WBW=2 PF=1 PC=1 PK=1 H=4 W=4 C=8 F=8 K=3 SEQ0=0 SEQ1=0 SEQ2=0 USE_DRAM=true FREQ=200 COEFF_ON_CHIP=true DEBUG=false INIT_COEFF=true maxJavaRun : Execute Java program with Maxeler environment

Input classpath     : 
MaxCompiler JAR     : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar
                      (from MAXCOMPILERDIR)
MAXAPPJCP           : .:../../../src:../../../test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
MAXSOURCEDIRS       : ../../src:../../../src

.maxJavaRun present : No
Custom Param file   : None
MAXAPPPKG           : bottleneck
MAXJVMMEM           : 
MAXEMMAJCP          : 
MAXEMMARUN          : 
JACOCO_AGENT        : 
JACOCO_AGENT_OPTIONS: 

----------------------------------------------------------
Java class to run   : bottleneck.BottleneckManager
Class arguments     : DFEModel=MAIA maxFileName=Bottleneck target=DFE_SIM enableMPCX=false bitWidth=8 WBW=2 PF=1 PC=1 PK=1 H=4 W=4 C=8 F=8 K=3 SEQ0=0 SEQ1=0 SEQ2=0 USE_DRAM=true FREQ=200 COEFF_ON_CHIP=true DEBUG=false INIT_COEFF=true
Execution classpath : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar:
                      .:
                      ../../../src:
                      ../../../test:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
JVM memory limit    : 8192 MB
----------------------------------------------------------

Thu 11:12: MaxCompiler version: 2021.1
Thu 11:12: Build "Bottleneck" start time: Thu Dec 16 11:12:08 GMT 2021
Thu 11:12: Main build process running as user rz3515 on host cccad5.doc.ic.ac.uk
Thu 11:12: Build location: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200
Thu 11:12: Detailed build log available in "_build.log"
Thu 11:12: 
Thu 11:12: ENGINE BUILD PARAMETERS
Thu 11:12: 	              Build name: Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200
Thu 11:12: 	             maxFileName: Bottleneck                                                                        
Thu 11:12: 	                  target: DFE_SIM                                                                           
Thu 11:12: 	                DFEModel: MAIA                                                                              
Thu 11:12: 	              enableMPCX: false                                                                             
Thu 11:12: 	                bitWidth: 8                                                                                 
Thu 11:12: 	                     WBW: 2                                                                                 
Thu 11:12: 	                   DTYPE: fixed                                                                             
Thu 11:12: 	           NUM_FRAC_BITS: 8                                                                                 
Thu 11:12: 	                      PF: 1                                                                                 
Thu 11:12: 	                      PC: 1                                                                                 
Thu 11:12: 	                      PK: 1                                                                                 
Thu 11:12: 	                       H: 4                                                                                 
Thu 11:12: 	                       W: 4                                                                                 
Thu 11:12: 	                       C: 8                                                                                 
Thu 11:12: 	                       F: 8                                                                                 
Thu 11:12: 	                       K: 3                                                                                 
Thu 11:12: 	                     PAD: 0                                                                                 
Thu 11:12: 	                       S: 1                                                                                 
Thu 11:12: 	                     SEQ: 0                                                                                 
Thu 11:12: 	                    FREQ: 200                                                                               
Thu 11:12: 	                USE_DRAM: true                                                                              
Thu 11:12: 	                 USE_BNN: false                                                                             
Thu 11:12: 	            USE_WINOGRAD: false                                                                             
Thu 11:12: 	WINOGRAD_WEIGHTS_OFFLINE: false                                                                             
Thu 11:12: 	   NUM_COEFF_FIFO_SPLITS: 1                                                                                 
Thu 11:12: 	                   DEBUG: false                                                                             
Thu 11:12: 	           COEFF_ON_CHIP: true                                                                              
Thu 11:12: 	              INIT_COEFF: true                                                                              
Thu 11:12: 	                    SEQ0: 0                                                                                 
Thu 11:12: 	                    SEQ1: 0                                                                                 
Thu 11:12: 	                    SEQ2: 0                                                                                 
Thu 11:12: Generating kernel conv0 ...
Thu 11:12: Instantiating kernel "conv0"
Thu 11:12: Init coeffient signal
Thu 11:12: Building pointwise convolution:
Thu 11:12: H = 4 W = 4 F = 8 C = 8 PF = 1 PC = 1
Thu 11:12: Seq = FILTER_MAJOR
Thu 11:12: Ifmap buffer configuration 128 x 1
Thu 11:12: loop = false
Thu 11:12: [ConvLayerOfmapBuffer] depth =    16 addr_bits =     4
Thu 11:12: Initialized coeff FMem list.
Thu 11:12: Compiling kernel "conv0"
Thu 11:12: WARNING: Warning (UNCONNECTED_DESIGN_ELEMENT):
Thu 11:12: WARNING: Unconnected elements in design 'conv0'
Thu 11:12: WARNING: details in : /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/scratch/conv0_graph_warnings.txt
Thu 11:12: 
Thu 11:12: Generating kernel conv1 ...
Thu 11:12: Instantiating kernel "conv1"
Thu 11:12: Init coeffient signal
Thu 11:12: WT = dfeFix(2, 0, UNSIGNED)
Thu 11:12: coeffOnChip = true
Thu 11:12: Input height = 4, output height = 4, pad = 1
Thu 11:12: Counter H = 6 W = 6
Thu 11:12: Ifmap buffer configuration 512 x 1
Thu 11:12: loop = false
Thu 11:12: Building line buffer for "conv1" ...
Thu 11:12: Line buffer shape 3 x 4, produces 1 number of 3 x 3 tiles per cycle
Thu 11:12: Line buffer input vector size: 1, output vector size: 9.
Thu 11:12: Number of separated line buffers: 1
Thu 11:12: Initialising line buffer kernel with 3 x 6 x 1
Thu 11:12: Size of line buffer output: 3
Thu 11:12: Number of line buffer output chunks: 3
Thu 11:12: Connecting outputs from chunk (#000) ...
Thu 11:12: Connecting outputs from chunk (#001) ...
Thu 11:12: Connecting outputs from chunk (#002) ...
Thu 11:12: Building the CORE arithmetic unit for "conv1" ...
Thu 11:12: WT = dfeFix(2, 0, UNSIGNED)
Thu 11:12: CORE ifmap vector size: 9
Thu 11:12: CORE coefficient vector size: 9
Thu 11:12: CORE ofmap vector size: 1
Thu 11:12: [ConvLayerOfmapBuffer] depth =    16 addr_bits =     4
Thu 11:12: Initialized coeff FMem list.
Thu 11:12: Compiling kernel "conv1"
Thu 11:12: WARNING: Warning (UNCONNECTED_DESIGN_ELEMENT):
Thu 11:12: WARNING: Unconnected elements in design 'conv1'
Thu 11:12: WARNING: details in : /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/scratch/conv1_graph_warnings.txt
Thu 11:12: 
Thu 11:12: Generating kernel conv2 ...
Thu 11:12: Instantiating kernel "conv2"
Thu 11:12: Init coeffient signal
Thu 11:12: Building pointwise convolution:
Thu 11:12: H = 4 W = 4 F = 8 C = 8 PF = 1 PC = 1
Thu 11:12: Seq = FILTER_MAJOR
Thu 11:12: Ifmap buffer configuration 128 x 1
Thu 11:12: loop = false
Thu 11:12: [ConvLayerOfmapBuffer] depth =    16 addr_bits =     4
Thu 11:12: Initialized coeff FMem list.
Thu 11:12: Connecting residual: conv0
Thu 11:12: Compiling kernel "conv2"
Thu 11:12: WARNING: Warning (UNCONNECTED_DESIGN_ELEMENT):
Thu 11:12: WARNING: Unconnected elements in design 'conv2'
Thu 11:12: WARNING: details in : /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/scratch/conv2_graph_warnings.txt
Thu 11:12: 
Thu 11:12: Generating padding kernels for DRAM access
Thu 11:12: Instantiating kernel "ifmap_unpad"
Thu 11:12: Compiling kernel "ifmap_unpad"
Thu 11:12: 
Thu 11:12: Instantiating kernel "ofmap_pad"
Thu 11:12: Compiling kernel "ofmap_pad"
Thu 11:12: 
Thu 11:12: Creating fanout with key: conv0
Thu 11:12: Setting up stream connections for conv0
Thu 11:12: Setting up stream connections for conv1
Thu 11:12: Setting up stream connections for conv2
Thu 11:12: Read from fanout: conv0_fanout
Thu 11:12: Connecting to Stream_34
Thu 11:12: Running back-end simulation build (3 phases)
Thu 11:12: (1/3) - Prepare MaxFile Data (GenerateMaxFileDataFile)
Thu 11:12: (2/3) - Compile Simulation Modules (SimCompilePass)
Thu 11:12: (3/3) - Generate MaxFile (AddSimObjectToMaxFilePass)
Thu 11:12: MaxFile: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Bottleneck.max (MD5Sum: 30bd23e1109cd7565601f7736d2e3f52)
Thu 11:12: Build completed: Thu Dec 16 11:12:22 GMT 2021 (took 13 secs)
cp /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Bottleneck.h /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Maxfiles.h
sliccompile /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Bottleneck.max Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_sim.o
Processing maxfile for MAX5_LIMA_SIM from '/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Bottleneck.max'.
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/dev/null" -DSLIC_NO_DESTRUCTORS -c /tmp/sliccompile_8855944287149398186/cobject/max_5273475246951770795.c -o /tmp/sliccompile_8855944287149398186/cobject/max_5273475246951770795.c.o 
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/Bottleneck_MAIA_DFE_SIM_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200/results/Bottleneck.max" -DSLIC_NO_DESTRUCTORS -c /vol/cc/opt/maxeler/maxcompiler-2021.1/src/slicinterface/MaxFileInit.c -o max_1626954528283592679.o 
ld -r /tmp/sliccompile_8855944287149398186/cobject/max_5273475246951770795.c.o max_1626954528283592679.o -o Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_sim.o 
Copying .max file C object into '/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/bottleneck'
g++ -fopenmp -lrt -D_GLIBCXX_USE_CXX11_ABI=0 -O3 -std=c++11  -Wall -I/mnt/ccnas2/bdp/rz3515/cccad/opt/include -I/usr/local/include -I../src -I../src/include -I../../../runtime/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -I/lib/maxeleros-sim/include -I../../../lib/dfe-snippets/include -D_XOPEN_SOURCE=600 -DDESIGN_ -DUSE_DRAM -DBIT_WIDTH=8 -DWBW=2  -g -o Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_sim Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_sim.o Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_simc.o -L/mnt/ccnas2/bdp/rz3515/cccad/opt/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib -L/lib/maxeleros-sim/lib -L./ -lmaxeleros -lglog -lgflags -lslic -lm -lpthread -lcurl
/usr/bin/ld: skipping incompatible /mnt/ccnas2/bdp/rz3515/cccad/opt/lib/libgomp.so when searching for -lgomp
/usr/bin/ld: skipping incompatible /mnt/ccnas2/bdp/rz3515/cccad/opt/lib/libgomp.a when searching for -lgomp
maxcompilersim -n rz3515b -cLIMA -d1 restart

Simulated system 'rz3515b' started:
    Board:                   MAX5C (default: 48GB RAM)
    RAM size for simulation: 51539607552 bytes.
    Temporary RAM file in    /tmp/. (Use option -k to preserve it.)
    Simulation log:          /homes/rz3515/.maxcompilersim/rz3515b-cccad5.log
    Daemon log:              /homes/rz3515/.maxcompilersim/rz3515b-cccad5_daemon.log

Simulated devices available:
    rz3515b0:rz3515b

To use simulated devices you need to set the environment variables
LD_PRELOAD and MAXELEROSDIR. As LD_PRELOAD must not contain spaces,
you might need to set LD_LIBRARY_PATH in addition (see the MaxCompiler
tutorial for details).  Also, ensure that you add the correct simulated
system name (namely "rz3515b") to your SLiC configuration. The following
examples assume there are no spaces in LD_PRELOAD or SLIC_CONF.
Example for BASH:
    export MAXELEROSDIR=$MAXCOMPILERDIR/lib/maxeleros-sim
    export LD_PRELOAD=$MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    export SLIC_CONF="$SLIC_CONF;use_simulation=rz3515b"
Example for CSH:
    setenv MAXELEROSDIR $MAXCOMPILERDIR/lib/maxeleros-sim
    setenv LD_PRELOAD $MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    setenv SLIC_CONF "$SLIC_CONF;use_simulation=rz3515b"

SLIC_CONF+="default_maxdebug_mode=MAX_DEBUG_ALWAYS;" SLIC_CONF+="use_simulation=rz3515b" LD_PRELOAD=/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib/libmaxeleros.so ./Bottleneck_b8_2_H4_W4_C8_F8_K3_S1_f1_c1_k1_SEQ0_0_0_DRAM_COC_FREQ_200_sim -n 2 
I1216 11:12:25.079926 120427 types.h:98] ConvLayerParameters:
 + H = 4
 + W = 4
 + K = 1
 + P = 0
 + S = 1
I1216 11:12:25.080152 120427 types.h:67] 
 + DFE parameters:
   * PC = 1
   * PF = 1
   * PK = 1
I1216 11:12:25.080168 120427 types.h:98] ConvLayerParameters:
 + H = 4
 + W = 4
 + K = 3
 + P = 1
 + S = 1
I1216 11:12:25.080178 120427 types.h:67] 
 + DFE parameters:
   * PC = 1
   * PF = 1
   * PK = 1
I1216 11:12:25.080188 120427 types.h:98] ConvLayerParameters:
 + H = 4
 + W = 4
 + K = 1
 + P = 0
 + S = 1
I1216 11:12:25.080670 120427 types.h:67] 
 + DFE parameters:
   * PC = 1
   * PF = 1
   * PK = 1
I1216 11:12:25.080776 120427 BottleneckCpuCode.cpp:114] Created and converted input and weights
I1216 11:12:25.080945 120427 BottleneckCpuCode.cpp:117] Run ConvLayerCpu ...
I1216 11:12:25.080955 120427 BottleneckCpuCode.cpp:118] 8 x 4 x 4 -> 8 x 4 x 4
I1216 11:12:25.081298 120427 BottleneckCpuCode.cpp:126] 8 x 4 x 4 -> 8 x 4 x 4
I1216 11:12:25.081646 120427 BottleneckCpuCode.cpp:134] 8 x 4 x 4 -> 8 x 4 x 4
I1216 11:12:25.081804 120427 BottleneckCpuCode.cpp:145] Done
I1216 11:12:25.081996 120427 BottleneckCpuCode.cpp:163] BIT_WIDTH = 8 WBW = 2
I1216 11:12:25.086401 120427 BottleneckCpuCode.cpp:200] initCoeff for conv0. size: 64 ticks: 64
I1216 11:12:25.107160 120427 BottleneckCpuCode.cpp:216] initCoeff for conv1. size: 576 ticks: 576
I1216 11:12:25.111285 120427 BottleneckCpuCode.cpp:232] initCoeff for conv2. size: 64 ticks: 64
I1216 11:12:25.111320 120427 BottleneckCpuCode.cpp:247] Initialized actions
I1216 11:12:25.111333 120427 utils.h:381] Burst aligning input array of size: 256 to 384
I1216 11:12:25.111346 120427 BottleneckCpuCode.cpp:259] Tiled input size (burst aligned): 384
I1216 11:12:25.111356 120427 utils.h:381] Burst aligning input array of size: 256 to 384
I1216 11:12:25.111367 120427 BottleneckCpuCode.cpp:261] Tiled output size (burst aligned): 384
I1216 11:12:25.111865 120427 layers.h:655] Writing DRAM to 0 with size 0x180
I1216 11:12:25.171486 120427 layers.h:672] Reading DRAM from 0x180 with size 0x180
I1216 11:12:25.174093 120427 BottleneckCpuCode.cpp:281] Examine results ...
I1216 11:12:25.174125 120427 BottleneckCpuCode.cpp:283] output_2_cpu[0] = 25
I1216 11:12:25.174144 120427 BottleneckCpuCode.cpp:283] output_2_cpu[1] = -32
I1216 11:12:25.174156 120427 BottleneckCpuCode.cpp:283] output_2_cpu[2] = -8
I1216 11:12:25.174167 120427 BottleneckCpuCode.cpp:283] output_2_cpu[3] = -16
I1216 11:12:25.174615 120427 BottleneckCpuCode.cpp:283] output_2_cpu[4] = -9
I1216 11:12:25.174904 120427 BottleneckCpuCode.cpp:288] output_dfe[0] = 25
I1216 11:12:25.175144 120427 BottleneckCpuCode.cpp:288] output_dfe[1] = -32
I1216 11:12:25.175376 120427 BottleneckCpuCode.cpp:288] output_dfe[2] = -8
I1216 11:12:25.175607 120427 BottleneckCpuCode.cpp:288] output_dfe[3] = -16
I1216 11:12:25.175837 120427 BottleneckCpuCode.cpp:288] output_dfe[4] = -9
I1216 11:12:25.176086 120427 BottleneckCpuCode.cpp:298] Evaluating difference ...
I1216 11:12:25.176307 120427 BottleneckCpuCode.cpp:299] Mask: 000000x1
I1216 11:12:25.176542 120427 BottleneckCpuCode.cpp:317] num_failed: 0 total: 256 avg_diff: 0
Running ...
Done
elapsed time: 0.056651s
GOP/s: 0.000795326
make stopsim
make[1]: Entering directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/bottleneck'
maxcompilersim -n rz3515b -cLIMA stop
Terminating MaxelerOS daemon (PID 120423)...
MaxelerOS daemon killed
Terminating simulated system (PID 120418)...
Simulated system killed
make[1]: Leaving directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/bottleneck'
