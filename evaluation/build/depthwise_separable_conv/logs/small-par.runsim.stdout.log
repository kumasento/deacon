BUILD_NAME_OPTION = _b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1
Running maxjc ...
Using maxj batch compiler.
jar: /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/ecj.jar
MAXAPPJCP=.:../../../src:../../../test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar \
	MAXAPPPKG=depthwise_separable_conv MAXSOURCEDIRS=../../src:../../../src \
	maxJavaRun -v -m 8192 DepthwiseSeparableConvLayerManager \
	DFEModel=MAIA maxFileName=DepthwiseSeparableConvLayer target='DFE_SIM' enableMPCX=false \
	bitWidth=16 WBW=16 NUM_LAYER=1 COEFF_ON_CHIP=true PF=4 PK=1 PC=4 H=4 W=4 C=8 F=8 K=3 SEQ=0 USE_DRAM=true S=1 PAD=1 FREQ=100 VERSION=1 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv/data/data-small-par.txt NUM_FRAC_BITS=8
]0; maxJavaRun: DepthwiseSeparableConvLayerManager DFEModel=MAIA maxFileName=DepthwiseSeparableConvLayer target=DFE_SIM enableMPCX=false bitWidth=16 WBW=16 NUM_LAYER=1 COEFF_ON_CHIP=true PF=4 PK=1 PC=4 H=4 W=4 C=8 F=8 K=3 SEQ=0 USE_DRAM=true S=1 PAD=1 FREQ=100 VERSION=1 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv/data/data-small-par.txt NUM_FRAC_BITS=8 maxJavaRun : Execute Java program with Maxeler environment

Input classpath     : 
MaxCompiler JAR     : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar
                      (from MAXCOMPILERDIR)
MAXAPPJCP           : .:../../../src:../../../test:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
MAXSOURCEDIRS       : ../../src:../../../src

.maxJavaRun present : No
Custom Param file   : None
MAXAPPPKG           : depthwise_separable_conv
MAXJVMMEM           : 
MAXEMMAJCP          : 
MAXEMMARUN          : 
JACOCO_AGENT        : 
JACOCO_AGENT_OPTIONS: 

----------------------------------------------------------
Java class to run   : depthwise_separable_conv.DepthwiseSeparableConvLayerManager
Class arguments     : DFEModel=MAIA maxFileName=DepthwiseSeparableConvLayer target=DFE_SIM enableMPCX=false bitWidth=16 WBW=16 NUM_LAYER=1 COEFF_ON_CHIP=true PF=4 PK=1 PC=4 H=4 W=4 C=8 F=8 K=3 SEQ=0 USE_DRAM=true S=1 PAD=1 FREQ=100 VERSION=1 DEBUG=false COEFF_FILE=/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv/data/data-small-par.txt NUM_FRAC_BITS=8
Execution classpath : /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/MaxCompiler.jar:
                      .:
                      ../../../src:
                      ../../../test:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max4Platform.jar:
                      /vol/cc/opt/maxeler/maxcompiler-2021.1/lib/Max5Platform.jar
JVM memory limit    : 8192 MB
----------------------------------------------------------

Sat 09:33: MaxCompiler version: 2021.1
Sat 09:33: Build "DepthwiseSeparableConvLayer" start time: Sat Dec 18 09:33:34 GMT 2021
Sat 09:33: Main build process running as user rz3515 on host cccad5.doc.ic.ac.uk
Sat 09:33: Build location: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1
Sat 09:33: Detailed build log available in "_build.log"
Sat 09:33: 
Sat 09:33: ENGINE BUILD PARAMETERS
Sat 09:33: 	              Build name: DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1   
Sat 09:33: 	             maxFileName: DepthwiseSeparableConvLayer                                                                             
Sat 09:33: 	                  target: DFE_SIM                                                                                                 
Sat 09:33: 	                DFEModel: MAIA                                                                                                    
Sat 09:33: 	              enableMPCX: false                                                                                                   
Sat 09:33: 	                bitWidth: 16                                                                                                      
Sat 09:33: 	                     WBW: 16                                                                                                      
Sat 09:33: 	                   DTYPE: fixed                                                                                                   
Sat 09:33: 	           NUM_FRAC_BITS: 8                                                                                                       
Sat 09:33: 	                      PF: 4                                                                                                       
Sat 09:33: 	                      PC: 4                                                                                                       
Sat 09:33: 	                      PK: 1                                                                                                       
Sat 09:33: 	                       H: 4                                                                                                       
Sat 09:33: 	                       W: 4                                                                                                       
Sat 09:33: 	                       C: 8                                                                                                       
Sat 09:33: 	                       F: 8                                                                                                       
Sat 09:33: 	                       K: 3                                                                                                       
Sat 09:33: 	                     PAD: 1                                                                                                       
Sat 09:33: 	                       S: 1                                                                                                       
Sat 09:33: 	                     SEQ: 0                                                                                                       
Sat 09:33: 	                    FREQ: 100                                                                                                     
Sat 09:33: 	                USE_DRAM: true                                                                                                    
Sat 09:33: 	                 USE_BNN: false                                                                                                   
Sat 09:33: 	            USE_WINOGRAD: false                                                                                                   
Sat 09:33: 	WINOGRAD_WEIGHTS_OFFLINE: false                                                                                                   
Sat 09:33: 	   NUM_COEFF_FIFO_SPLITS: 1                                                                                                       
Sat 09:33: 	                   DEBUG: false                                                                                                   
Sat 09:33: 	           COEFF_ON_CHIP: true                                                                                                    
Sat 09:33: 	              INIT_COEFF: false                                                                                                   
Sat 09:33: 	              COEFF_FILE: /mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv/data/data-small-par.txt
Sat 09:33: 	                 VERSION: 1                                                                                                       
Sat 09:33: 	               NUM_LAYER: 1                                                                                                       
Sat 09:33: Generating kernel conv0 ...
Sat 09:33: Instantiating kernel "conv0"
Sat 09:33: T = dfeFix(8, 8, TWOSCOMPLEMENT)
Sat 09:33: WT = dfeFix(8, 8, TWOSCOMPLEMENT)
Sat 09:33: WT = dfeFix(8, 8, TWOSCOMPLEMENT)
Sat 09:33: coeffOnChip = true
Sat 09:33: Input height = 4, output height = 4, pad = 1
Sat 09:33: Counter H = 6 W = 6
Sat 09:33: oh is dfeFix(32, 0, TWOSCOMPLEMENT)
Sat 09:33: ow is dfeFix(32, 0, TWOSCOMPLEMENT)
Sat 09:33: Pointwise coeff type = {DFEVectorType: 16 x dfeFix(8, 8, TWOSCOMPLEMENT)}
Sat 09:33: Building line buffer for "conv0" ...
Sat 09:33: Line buffer shape 3 x 4, produces 1 number of 3 x 3 tiles per cycle
Sat 09:33: Line buffer input vector size: 4, output vector size: 36.
Sat 09:33: Number of separated line buffers: 4
Sat 09:33: Initialising line buffer kernel with 3 x 6 x 1
Sat 09:33: Size of line buffer output: 3
Sat 09:33: Number of line buffer output chunks: 3
Sat 09:33: Connecting outputs from chunk (#000) ...
Sat 09:33: Connecting outputs from chunk (#001) ...
Sat 09:33: Connecting outputs from chunk (#002) ...
Sat 09:33: Initialising line buffer kernel with 3 x 6 x 1
Sat 09:33: Size of line buffer output: 3
Sat 09:33: Number of line buffer output chunks: 3
Sat 09:33: Connecting outputs from chunk (#000) ...
Sat 09:33: Connecting outputs from chunk (#001) ...
Sat 09:33: Connecting outputs from chunk (#002) ...
Sat 09:33: Initialising line buffer kernel with 3 x 6 x 1
Sat 09:33: Size of line buffer output: 3
Sat 09:33: Number of line buffer output chunks: 3
Sat 09:33: Connecting outputs from chunk (#000) ...
Sat 09:33: Connecting outputs from chunk (#001) ...
Sat 09:33: Connecting outputs from chunk (#002) ...
Sat 09:33: Initialising line buffer kernel with 3 x 6 x 1
Sat 09:33: Size of line buffer output: 3
Sat 09:33: Number of line buffer output chunks: 3
Sat 09:33: Connecting outputs from chunk (#000) ...
Sat 09:33: Connecting outputs from chunk (#001) ...
Sat 09:33: Connecting outputs from chunk (#002) ...
Sat 09:33: Building the CORE arithmetic unit for "conv0_dw" ...
Sat 09:33: WT = dfeFix(8, 8, TWOSCOMPLEMENT)
Sat 09:33: CORE ifmap vector size: 36
Sat 09:33: CORE coefficient vector size: 36
Sat 09:33: CORE ofmap vector size: 4
Sat 09:33: Ifmap buffer configuration 32 x 4
Sat 09:33: loop = false
Sat 09:33: Building the CORE arithmetic unit for "conv0_pw" ...
Sat 09:33: WT = dfeFix(8, 8, TWOSCOMPLEMENT)
Sat 09:33: CORE ifmap vector size: 4
Sat 09:33: CORE coefficient vector size: 16
Sat 09:33: CORE ofmap vector size: 4
Sat 09:33: [ConvLayerOfmapBuffer] depth =    16 addr_bits =     4
Sat 09:33: Depthwise coeff ROM depth = 2
Sat 09:33: Pointwise coeff ROM depth = 4
Sat 09:33: Read for key = conv0_dw
Sat 09:33: Read for key = conv0_pw
Sat 09:33: Compiling kernel "conv0"
Sat 09:33: 
Sat 09:33: Generating padding kernels for DRAM access
Sat 09:33: Instantiating kernel "ifmap_unpad"
Sat 09:33: Compiling kernel "ifmap_unpad"
Sat 09:33: 
Sat 09:33: Instantiating kernel "ofmap_pad"
Sat 09:33: Compiling kernel "ofmap_pad"
Sat 09:33: 
Sat 09:33: Setting up stream connections for conv0
Sat 09:33: DRAM will be used to build the design
Sat 09:33: Setup streams for kernel "conv0"
Sat 09:33: # cycles:       144
Sat 09:33: # ifmap stream: 128
Sat 09:33: # coeff stream: 216
Sat 09:33: # ofmap stream: 128
Sat 09:33: coeff vec size: 144
Sat 09:33: coeff stream bit width: 2304
Sat 09:33: coeff stream chunk size: 9
Sat 09:33: Running back-end simulation build (3 phases)
Sat 09:33: (1/3) - Prepare MaxFile Data (GenerateMaxFileDataFile)
Sat 09:33: (2/3) - Compile Simulation Modules (SimCompilePass)
Sat 09:33: (3/3) - Generate MaxFile (AddSimObjectToMaxFilePass)
Sat 09:33: MaxFile: /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/DepthwiseSeparableConvLayer.max (MD5Sum: 3d0c057653ad21e2997197e3efd9ceb1)
Sat 09:33: Build completed: Sat Dec 18 09:33:46 GMT 2021 (took 11 secs)
cp /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/DepthwiseSeparableConvLayer.h /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/Maxfiles.h
sliccompile /mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/DepthwiseSeparableConvLayer.max DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_sim.o
Processing maxfile for MAX5_LIMA_SIM from '/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/DepthwiseSeparableConvLayer.max'.
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/dev/null" -DSLIC_NO_DESTRUCTORS -c /tmp/sliccompile_5438952120905581558/cobject/max_7200575377381274553.c -o /tmp/sliccompile_5438952120905581558/cobject/max_7200575377381274553.c.o 
/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/clang/bin/start.sh clang -fgnu89-inline -pipe -O0 -std=gnu99 -Wall -Werror -frandom-seed=foo -Wno-unused-variable -Wno-unused-function -fPIC -I /vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -DMAXFILE_INC="/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results/DepthwiseSeparableConvLayer.max" -DSLIC_NO_DESTRUCTORS -c /vol/cc/opt/maxeler/maxcompiler-2021.1/src/slicinterface/MaxFileInit.c -o max_710464023538897568.o 
ld -r /tmp/sliccompile_5438952120905581558/cobject/max_7200575377381274553.c.o max_710464023538897568.o -o DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_sim.o 
Copying .max file C object into '/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv'
g++ ../../src/depthwise_separable_conv/DepthwiseSeparableConvLayerCpuCode.cpp -fopenmp -lrt -D_GLIBCXX_USE_CXX11_ABI=0 -O3 -std=c++11  -Wall -I/mnt/ccnas2/bdp/rz3515/cccad/opt/include -I/usr/local/include -I../src -I../src/include -I../../../runtime/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -I/lib/maxeleros-sim/include -I../../../lib/dfe-snippets/include -D_XOPEN_SOURCE=600 -DDESIGN_ -DUSE_DRAM -DBIT_WIDTH=16 -DWBW=16 -DDEPTHWISE_SEPARABLE_V2 -DNUM_LAYER=1  -g -I/mnt/ccnas2/bdp/rz3515/maxcompiler_builds/DepthwiseSeparableConvLayer_MAIA_DFE_SIM_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1/results -D__SIM__ -DDESIGN_NAME=DepthwiseSeparableConvLayer -c -o DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_simc.o
g++ -fopenmp -lrt -D_GLIBCXX_USE_CXX11_ABI=0 -O3 -std=c++11  -Wall -I/mnt/ccnas2/bdp/rz3515/cccad/opt/include -I/usr/local/include -I../src -I../src/include -I../../../runtime/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include -I/vol/cc/opt/maxeler/maxcompiler-2021.1/include/slic -I/lib/maxeleros-sim/include -I../../../lib/dfe-snippets/include -D_XOPEN_SOURCE=600 -DDESIGN_ -DUSE_DRAM -DBIT_WIDTH=16 -DWBW=16 -DDEPTHWISE_SEPARABLE_V2 -DNUM_LAYER=1  -g -o DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_sim DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_sim.o DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_simc.o -L/mnt/ccnas2/bdp/rz3515/cccad/opt/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib -L/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib -L/lib/maxeleros-sim/lib -L./ -lmaxeleros -lglog -lgflags -lslic -lm -lpthread -lcurl
maxcompilersim -n rz3515a -cLIMA -d1 restart

Simulated system 'rz3515a' started:
    Board:                   MAX5C (default: 48GB RAM)
    RAM size for simulation: 51539607552 bytes.
    Temporary RAM file in    /tmp/. (Use option -k to preserve it.)
    Simulation log:          /homes/rz3515/.maxcompilersim/rz3515a-cccad5.log
    Daemon log:              /homes/rz3515/.maxcompilersim/rz3515a-cccad5_daemon.log

Simulated devices available:
    rz3515a0:rz3515a

To use simulated devices you need to set the environment variables
LD_PRELOAD and MAXELEROSDIR. As LD_PRELOAD must not contain spaces,
you might need to set LD_LIBRARY_PATH in addition (see the MaxCompiler
tutorial for details).  Also, ensure that you add the correct simulated
system name (namely "rz3515a") to your SLiC configuration. The following
examples assume there are no spaces in LD_PRELOAD or SLIC_CONF.
Example for BASH:
    export MAXELEROSDIR=$MAXCOMPILERDIR/lib/maxeleros-sim
    export LD_PRELOAD=$MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    export SLIC_CONF="$SLIC_CONF;use_simulation=rz3515a"
Example for CSH:
    setenv MAXELEROSDIR $MAXCOMPILERDIR/lib/maxeleros-sim
    setenv LD_PRELOAD $MAXELEROSDIR/lib/libmaxeleros.so:$LD_PRELOAD
    setenv SLIC_CONF "$SLIC_CONF;use_simulation=rz3515a"

SLIC_CONF+="default_maxdebug_mode=MAX_DEBUG_ALWAYS;" SLIC_CONF+="use_simulation=rz3515a" LD_PRELOAD=/vol/cc/opt/maxeler/maxcompiler-2021.1/lib/maxeleros-sim/lib/libmaxeleros.so ./DepthwiseSeparableConvLayer_b16_16_8_N1_H4_W4_C8_F8_K3_S1_f4_c4_k1_SEQ0_DRAM_FREQ_100_V1_sim -n 2 -f /mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv/data/data-small-par.txt
Initializing arrays ...
Running golden function ...
Running ...
Done
elapsed time: 0.0107011s
make stopsim
make[1]: Entering directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv'
maxcompilersim -n rz3515a -cLIMA stop
Terminating MaxelerOS daemon (PID 395178)...
MaxelerOS daemon killed
Terminating simulated system (PID 395174)...
Simulated system killed
make[1]: Leaving directory `/mnt/ccnas2/bdp/rz3515/projects/deacon/evaluation/build/depthwise_separable_conv'
